# Task: Water Molecule Formation

This assignment aims to test your understanding of cooperative synchronization and it can be implemented using either Go's channel primitives or condition variables, i.e., `sync.Cond`.

You should complete the `releaseOxygen` and `releaseHydrogen` routines, and the goal is to synchronize these routines to form water molecules.

- `releaseOxygen`: can produce only one oxygen atom and should block until that atom is consumed to form the water molecule before releasing another oxygen atom.
- `releaseHydrogen`: can produce at most two hydrogen atoms and should block until these atoms are consumed to form the water molecule before releasing additional hydrogen atoms.

The rule for each routine is to wait until a complete water molecule can be formed.
You must guarantee that all goroutines form one molecule bond before any other goroutines form the next molecule.

When the routine produces an atom it should emit the corresponding symbol:

- `H` by `releaseHydrogen` and
- `O` by `releaseOxygen`

When a water molecule is formed, `moleculeCount` should be incremented.

The input to the `Make` method is a string containing `H` and `O` with length that is a multiple of 3.
The test provided inputs always have sufficient and matching hydrogen and oxygen atoms.
There is no need to verify the input.

The output of `Make` is a string generated by the two goroutines; the output may be non-deterministic.
To check that your code is correct, you can run:

```console
go test -v -run TestWater -count=10
```

The `count=10` flag is used to specify the number of times the test should run, and can be useful to check if that your code tolerates the non-determintic nature of the output.

Complete the code marked with `TODO(student)`.

## Example 1

The example below shows a runnable example program that can be run as follows:

```sh
go test -v -run Example_one
```

```golang
func Example_one() {
	water := New()
	water.Make("HOH")
	fmt.Println(water.Molecules())
	// Output: 1
}
```

Note that we don't print the output of `water.Make()` because it is non-deterministic.
That is, the actual output may be different for each run of the example test.
Valid output strings would be: `HHO`, `HOH`, `OHH`.

## Example 2

```sh
go test -v -run Example_two
```

```golang
func Example_two() {
	water := New()
	water.Make("OOHHHH")
	fmt.Println(water.Molecules())
	// Output: 2
}
```

Valid output strings from `water.Make()` would be:
`HHOHHO`, `HOHHHO`, `OHHHHO`, `HHOHOH`, `HOHHOH`, `OHHHOH`, `HHOOHH`, `HOHOHH` and `OHHOHH`.
